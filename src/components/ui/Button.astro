---
import { Icon } from "astro-icon/components";

interface Props {
  href?: string;
  variant?: "primary" | "secondary" | "outline";
  icon?: string;
  external?: boolean;
  class?: string;
  [key: string]: unknown;
}

const {
  href,
  variant = "primary",
  icon,
  external = false,
  class: className,
  ...rest
} = Astro.props;

const Element = href ? "a" : "button";
const externalProps = external ? { target: "_blank", rel: "noopener noreferrer" } : {};
---

<Element
  href={href}
  class:list={["btn", `btn--${variant}`, className]}
  data-magnetic
  {...externalProps}
  {...rest}
>
  <span class="btn__text">
    <slot />
  </span>
  {icon && <Icon name={icon} class="btn__icon" size={20} />}
</Element>

<style lang="scss">
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    padding: var(--space-md) var(--space-xl);
    font-size: var(--text-sm);
    font-weight: 600;
    border-radius: var(--radius-full);
    transition: all var(--duration-normal) var(--ease-out-quart);
    position: relative;
    overflow: hidden;

    &__text {
      position: relative;
      z-index: 1;
    }

    &__icon {
      position: relative;
      z-index: 1;
      transition: transform var(--duration-normal) var(--ease-out-quart);
    }

    &--primary {
      background: var(--color-text);
      color: var(--color-primary);

      &:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-glow);

        .btn__icon {
          transform: translate(3px, -3px);
        }
      }
    }

    &--secondary {
      background: transparent;
      border: 1px solid var(--color-border);
      color: var(--color-text);

      &:hover {
        border-color: var(--color-text);
        background: rgba(var(--color-white), 0.05);
      }
    }

    &--outline {
      background: transparent;
      border: 1px solid var(--color-border);
      color: var(--color-text);

      &:hover {
        border-color: var(--color-accent);
        color: var(--color-accent);

        .btn__icon {
          transform: translate(3px, -3px);
        }
      }
    }
  }
</style>
